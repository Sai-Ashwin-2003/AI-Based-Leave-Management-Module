{% extends 'myapp/base_dashboard.html' %}
{% block content %}

<h2 class="text-2xl font-semibold text-gray-800 mb-6">My Leave Requests</h2>

<div class="bg-white shadow-md rounded-lg overflow-hidden">
  <table class="min-w-full text-sm text-left text-gray-700">
    <thead class="bg-gray-50 text-gray-600 text-xs uppercase tracking-wider">
      <tr>
        <th class="px-6 py-3 border-b">Type</th>
        <th class="px-6 py-3 border-b">Dates</th>
        <th class="px-6 py-3 border-b">Status</th>
        <th class="px-6 py-3 border-b">Reviewed By</th>
        <th class="px-6 py-3 border-b">Decision Reason</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-200">
      {% for req in requests %}
      <tr class="hover:bg-indigo-50 transition duration-200">
        <td class="px-6 py-4">{{ req.leave_type.name }}</td>
        <td class="px-6 py-4">{{ req.start_date }} â†’ {{ req.end_date }}</td>
        <td class="px-6 py-4">{{ req.status }}</td>
        <td class="px-6 py-4">
          {% if req.reviewed_by %}
            {{ req.reviewed_by.get_full_name|default:req.reviewed_by.username }}
          {% else %}
            -
          {% endif %}
        </td>

        <td class="px-6 py-4">
          {% if req.review_reason %}
            {{ req.review_reason }}
          {% else %}
            -
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" class="px-6 py-4 text-center text-gray-500">No leave requests yet</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
