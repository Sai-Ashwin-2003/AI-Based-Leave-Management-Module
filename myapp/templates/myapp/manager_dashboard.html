{% extends "myapp/manager_base.html" %}

{% block content %}
  <h2 class="text-2xl font-bold mb-6">Pending Leave Requests</h2>

  {% if pending_requests %}
    <table class="w-full bg-white rounded shadow mb-8">
      <thead>
        <tr class="bg-gray-200">
          <th class="p-3 text-left">Employee</th>
          <th class="p-3 text-left">Leave Type</th>
          <th class="p-3 text-left">Dates</th>
          <th class="p-3 text-left">Reason</th>
          <th class="p-3 text-left">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for leave in pending_requests %}
        <tr class="border-b">
          <td class="p-3">{{ leave.user.username }}</td>
          <td class="p-3">{{ leave.leave_type.name }}</td>
          <td class="p-3">{{ leave.start_date }} â†’ {{ leave.end_date }}</td>
          <td class="p-3">{{ leave.reason }}</td>
          <td class="p-3">
            <a href="{% url 'manager_leave_request_detail' leave.id %}"
               class="px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700">
              Leave Request
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="text-gray-500">No pending requests.</p>
  {% endif %}

  <h2 class="text-2xl font-bold mb-4">Notifications</h2>

  {% if notifications %}
    <ul class="bg-white rounded shadow p-4">
      {% for note in notifications %}
      <li class="border-b py-2">
        {{ note.message }} <span class="text-gray-400 text-sm">({{ note.created_at|date:"M d, Y H:i" }})</span>
      </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-gray-500">No new notifications.</p>
  {% endif %}
{% endblock %}
